/// Un dossier législatif comprend l'ensemble des travaux parlementaires relatifs à un texte depuis son dépôt - par le gouvernement (projet de loi), ou par un parlementaire (proposition de loi) - jusqu'à sa promulgation.
model Dossier {
  /// Identifiant unique.
  uid                    String                   @id
  /// Hachage de l'objet
  hash                   String                   @unique
  /// Type du dossier
  xsiType                String?
  /// Numéro de la législature.
  legislature            String
  /// URL du dossier législatif sur le site du Sénat.
  senatChemin            String?
  /// Titre du dossier législatif.
  titre                  String?
  /// Chemin permettant de construire l'URL du dossier législatif sur le site de l'Assemblée nationale: http://www.assemblee-nationale.fr/dyn/**legislature**/dossiers/**titreChemin**
  titreChemin            String?
  /// Mots clés.
  theme                  String?
  /// Code unique pour traitement automatisé.
  codeProcedure          String
  /// Signification du code.
  libelleProcedure       String
  /// Le dossier parlementaire est lié à un autre. Si la cause est un 'Examen commun', les deux dossiers continuent d'évoluer indépendament. Par exemple une mission d'information peut être liée au dossier parlementaire qui représente le rapport produit par cette mission. Si la cause est 'Dossier absorbé', il devient obsolete et le dossier absorbant prend la suite. Par exemple, lorsqu'une loi ordinaire devient une loi organique, un nouveau dossier parlementaire est constitué, l'intégralité du dossier absorbé est copié dans le nouveau dossier.
  causeFusionDossier     String?
  /// Identifiant unique (uid) du dossier parlementaire absorbant.
  dossierAbsorbantRefUid String?                  @unique
  /// Organe à l'initiative du dossier.
  organeRefUid           String?
  organeUid              String?
  /// Numéro du dossier
  numero                 String?
  vecteurRecherche       Unsupported("tsvector")? @default(dbgenerated("to_tsvector('french'::regconfig, ((immutable_unaccent((COALESCE(titre, ''::text))::character varying) || ' '::text) || immutable_unaccent((COALESCE(numero, ''::text))::character varying)))"))
  actesLegislatifs       ActeLegislatif[]
  dossierAbsorbantRef    Dossier?                 @relation("DossierAbsorbant", fields: [dossierAbsorbantRefUid], references: [uid])
  dossierAbsorbrant      Dossier?                 @relation("DossierAbsorbant")
  Organe                 Organe?                  @relation(fields: [organeUid], references: [uid])
  plf                    EtudePlf[]
  initiateurs            InitiateurDossier[]

  @@index([vecteurRecherche], type: Gin)
}

model ActeLegislatif {
  /// Identifiant unique.
  uid                                 String                     @id
  /// Hachage de l'objet
  hash                                String                     @unique
  /// Code de l'acte législatif dont la valeur dépend de sa place dans la hiérarchie.
  codeActe                            String
  /// Nom de l'acte législatif.
  nomCanonique                        String?
  /// Equivalent du nomCanonique mais plus court.
  libelleCourtActe                    String?
  /// Type d'acte législatif.
  xsiType                             String
  /// Date à laquelle l'acte a débuté.
  dateActe                            DateTime?
  /// Organe référent.
  organeRefUid                        String?
  /// Organe de provenance.
  organeProvenanceRefUid              String?
  /// Code unique pour traitement automatisé de la conclusion de l'acte.
  famCodeStatutConclusion             String?
  /// Signification du code.de la conclusion de l'acte.
  libelleStatutConclusion             String?
  /// Code unique pour traitement automatisé de la saisine.
  famCodeCasSaisine                   String?
  /// Signification du code.de la saisine.
  libelleCasSaisine                   String?
  /// Année de la décision du conseil constitutionnel (2018, 2019, ...).
  anneeDecisionConseilConstitutionnel String?
  /// URL contenant le texte de la décision, sur http://www.conseil-constitutionnel.fr/.
  urlConclusionConseilConstitutionnel String?
  /// Motif Conseil Constitutionnel
  motifConseilConstitutionnel         String?
  /// Numéro de la décision du conseil constitutionnel.
  numDecisionConseilConstitutionnel   String?
  /// Identifiant unique (uid) de l'acteur auteur de la motion.
  auteurMotionRefUid                  String?
  /// Code unique pour traitement automatisé du type de motion.
  famCodeTypeMotion                   String?
  /// Signification du code du type de motion.
  libelleTypeMotion                   String?
  /// Code unique pour traitement automatisé du type de motion de censure.
  famCodeTypeMotionCensure            String?
  /// Signification du code du type de motion de censure.
  libelleTypeMotionCensure            String?
  /// Code unique pour traitement automatisé de la décision concernant une motion ou décision de recevabilité par le bureau (par exemple: irrecevable, Motion rejeté(e)).
  famCodeDecision                     String?
  /// Signification du code de la décision.
  libelleDecision                     String?
  /// Les motifs de la décision concernant une motion ou la recevabilité par le bureau.
  formuleDecision                     String?
  /// Identifiant unique de la loi promulguée.
  codeLoiRefUid                       String?
  /// Date de publication du texte promulgué au journal officiel.
  dateJo                              String?
  /// Numéro du journal officiel.
  numJo                               String?
  /// Numéro NOR attribué au texte promulgué.
  referenceNor                        String?
  typeJo                              String?
  /// URL du texte promulgué sur le site https://www.legifrance.gouv.fr/
  urlLegifrance                       String?
  /// Titre du projet de loi promulgué.
  titreLoi                            String?
  /// URL vers l’échéancier d’application de la loi sur le site du legifrance.gouv.fr (rarement renseigné).
  urlEcheancierLoi                    String?
  /// Date de fermeture des contributions.
  dateFermetureContributionInternaute String?
  /// Date d'ouverture des contributions.
  dateOuvertureContributionInternaute String?
  /// Date de la publication du Journal officiel de l'Union européenne.
  dateJoce                            String?
  /// Référence du Journal officiel de l'Union européenne, de la forme L suivit d'un numéro.
  refJoce                             String?
  /// Titre du texte publié dans un numéro du Journal officiel de l'Union européenne.
  titreTexteEuropeen                  String?
  /// Type du texte européen (par exemple: Règlement de la Commission).
  typeTexteEuropeen                   String?
  /// Identifiant unique de l'ordre du jour de la réunion dans l'agenda.
  odjRefUid                           String?
  /// Identifiant unique de la réunion dans l'agenda. 
  reunionRefUid                       String?
  /// Code unique pour traitement automatisé du statut de l'adoption.
  famCodeStatutAdoption               String?
  /// Signification du code de statut de l'adoption.
  libelleStatutAdoption               String?
  /// Identifiant unique (uid) d'un rapport.
  texteAdopteRefUid                   String?                    @unique
  /// Identifiant unique (uid) d'un rapport.
  texteAssocieRefUid                  String?
  /// Code unique pour traitement automatisé du type de déclaration.
  famCodeStatutTypeDeclaration        String?
  /// Signification du code du type de déclaration.
  libelleStatutTypeDeclaration        String?
  dossierRefUid                       String?
  agendaUid                           String?
  pointOdjUid                         String?
  Agenda                              Agenda?                    @relation(fields: [agendaUid], references: [uid])
  auteurMotionRef                     Acteur?                    @relation("ActeLegislatif_auteurMotion", fields: [auteurMotionRefUid], references: [uid])
  dossierRef                          Dossier?                   @relation(fields: [dossierRefUid], references: [uid])
  PointOdj                            PointOdj?                  @relation(fields: [pointOdjUid], references: [uid])
  auteursRefs                         AuteurMotion[]
  infoJoRect                          InfoJoRect[]
  initiateurActeLegislatif            InitiateurActeLegislatif[]
  rapporteurs                         Rapporteur[]
  Scrutin                             Scrutin[]
  textesAssocies                      TexteAssocie[]
  VoteActeLegislatif                  VoteActeLegislatif[]
}

/// Acteur à l'initiative d'un dossier.
model InitiateurDossier {
  /// Identifiant unique.
  slug          String   @id
  /// Dossier référent.
  dossierRefUid String?
  /// Acteur référent.
  acteurRefUid  String?
  /// Mandat référent.
  mandatRefUid  String?
  acteurUid     String?
  mandatUid     String?
  Acteur        Acteur?  @relation(fields: [acteurUid], references: [uid])
  dossierRef    Dossier? @relation(fields: [dossierRefUid], references: [uid])
  Mandat        Mandat?  @relation(fields: [mandatUid], references: [uid])
}

/// Acteur auteur de la motion de censure ou de la motion référendaire.
model AuteurMotion {
  /// Identifiant unique.
  slug                 String          @id
  /// Identifiant unique (uid) de l'acteur auteur de la motion.
  auteurMotionRefUid   String?
  acteLegislatifRefUid String?
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
  auteurMotionRef      Acteur?         @relation(fields: [auteurMotionRefUid], references: [uid])
}

/// Informations relatives à la publication d'une lettre rectificative au journal officiel.
model InfoJoRect {
  /// Hachage de l'objet
  hash                 String          @id
  /// Date de publication d'une lettre rectificative au journal officiel.
  dateJo               String?
  /// Numéro du journal officiel.
  numJo                String?
  /// Numéro NOR attribué à la lettre rectificative.
  referenceNor         String?
  typeJo               String?
  /// URL de la lettre rectificative sur le site https://www.legifrance.gouv.fr/
  urlLegifrance        String?
  acteLegislatifRefUid String?
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
}

model InitiateurActeLegislatif {
  /// Identifiant unique.
  slug                 String          @id
  /// Identifiant unique (uid) de l'acteur.
  acteurRefUid         String?
  /// Identifiant unique (uid) du mandat.
  mandatRefUid         String?
  acteLegislatifRefUid String?
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
  acteurRef            Acteur?         @relation(fields: [acteurRefUid], references: [uid])
  mandatRef            Mandat?         @relation(fields: [mandatRefUid], references: [uid])
}

model Rapporteur {
  /// Identifiant unique.
  slug                 String          @id
  /// Identifiant unique (uid) du rapporteur.
  acteurRefUid         String
  /// Identifiant unique (uid) de l'étude relative à un projet de loi de finance.
  etudePlfRefUid       String?
  /// Un 'rapporteur spécial' produit un rapport (texteAssocie débute par RAPP) ou une étude (texteAssocie débute par ETDR) alors qu'un 'rapporteur pour avis' produit un avis (texteAssocie débute par AVIS).
  typeRapporteur       String
  acteLegislatifRefUid String?
  acteurUid            String?
  etudePlfUid          String?
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
  Acteur               Acteur?         @relation(fields: [acteurUid], references: [uid])
  EtudePlf             EtudePlf?       @relation(fields: [etudePlfUid], references: [uid])
}

model EtudePlf {
  /// Identifiant unique.
  uid                 String       @id
  /// Hachage de l'objet
  hash                String       @unique
  /// Nom de la mission de l'état à laquelle se rapporte l'étude.
  libelleCourt        String?
  /// Des missions secondaires (ou partie de mission) peuvent subsdiviser une mission principale. Par exemple la mission principale Action extérieure de l'État peut contenir une partie de mission Tourisme qui dispose de son propre budget.
  missionParentRefUid String?
  /// Au premier niveau le type est toujours 'mission principale', au second niveau (c'est à dire inclus dans la liste **missions**) le type peut être 'mission secondaire' ou 'partie de mission'.
  typeMission         String?
  /// Identifiant unique (uid) de la commission qui réalise l'étude.
  organeRefUid        String?
  /// Identifiant unique (uid) du document.
  texteAssocieRefUid  String?
  dossierRefUid       String?
  documentUid         String?
  Document            Document?    @relation(fields: [documentUid], references: [uid])
  dossierRef          Dossier?     @relation(fields: [dossierRefUid], references: [uid])
  missionParentRef    EtudePlf?    @relation("EtudePlf", fields: [missionParentRefUid], references: [uid])
  missionEnfantRef    EtudePlf[]   @relation("EtudePlf")
  organeRef           Organe?      @relation(fields: [organeRefUid], references: [uid])
  rapporteurs         Rapporteur[]
}

model VoteActeLegislatif {
  /// Identifiant unique.
  slug                 String          @id
  voteRefUid           String          @unique
  acteLegislatifRefUid String
  // scrutinUid           String
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
  votes                Vote[]
  // Scrutin              Scrutin?        @relation(fields: [scrutinUid], references: [uid])
}

model TexteAssocie {
  /// Identifiant unique.
  slug                 String          @id
  /// Identifiant unique du texte adopté.
  texteAssocieRefUid   String?
  /// BTA pour Bibard du Texte Adopté ou TAP pour Texte Adopté Provisoire.
  typeTexte            String?
  acteLegislatifRefUid String?
  acteLegislatifRef    ActeLegislatif? @relation(fields: [acteLegislatifRefUid], references: [uid])
  texteAssocieRef      Document?       @relation(fields: [texteAssocieRefUid], references: [uid])
}
